(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{838:function(a,s,t){"use strict";t.r(s);var n=t(76),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[a._v("#")]),a._v(" 介绍")]),a._v(" "),s("p",[s("code",[a._v("Corgi")]),a._v("在服务器部署以及"),s("code",[a._v("jenkins")]),a._v("自动化调用方式")]),a._v(" "),s("h2",{attrs:{id:"服务器部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器部署"}},[a._v("#")]),a._v(" 服务器部署")]),a._v(" "),s("h3",{attrs:{id:"nodejs-安装及配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nodejs-安装及配置"}},[a._v("#")]),a._v(" "),s("code",[a._v("nodejs")]),a._v(" 安装及配置")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过wget安装node 16.9.1版本")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /data/TRS/soft/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://nodejs.org/dist/v16.19.1/node-v16.19.1-linux-x64.tar.xz\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 解压tar包，并移动到相应目录下")]),a._v("\nxz "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" node-v16.19.1-linux-x64.tar.xz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xf")]),a._v(" node-v16.19.1-linux-x64.tar\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" node-v16.19.1-linux-x64 /data/TRS/\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置软链接")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /data/TRS/node-v16.19.1-linux-x64/bin/node /usr/bin/node\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /data/TRS/node-v16.19.1-linux-x64/bin/npm /usr/bin/npm\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 结果验证")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("node")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置国内镜像源")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" config "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" registry https://registry.npmmirror.com\n")])])]),s("h3",{attrs:{id:"pnpm-依赖包管理工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-依赖包管理工具"}},[a._v("#")]),a._v(" "),s("code",[a._v("pnpm")]),a._v(" 依赖包管理工具")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装命令")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("pnpm")]),a._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置软链接")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /data/TRS/node-v16.19.1-linux-x64/bin/pnpm /usr/bin/pnpm\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 结果验证")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("pnpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])])]),s("h3",{attrs:{id:"corgi-集中管理工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#corgi-集中管理工具"}},[a._v("#")]),a._v(" "),s("code",[a._v("corgi")]),a._v(" 集中管理工具")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装命令")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" corgi-biu\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置软链接")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /data/TRS/node-v16.19.1-linux-x64/bin/corgi /usr/bin/corgi\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 结果验证")]),a._v("\ncorgi "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-V")]),a._v("\n")])])]),s("h2",{attrs:{id:"jenkins-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-配置"}},[a._v("#")]),a._v(" "),s("code",[a._v("jenkins")]),a._v(" 配置")]),a._v(" "),s("p",[a._v("在各前端项目的"),s("code",[a._v("jenkins")]),a._v("配置下 "),s("code",[a._v("shell")]),a._v(" 处加入")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入项目目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$WORKSPACE")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 依赖安装")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("pnpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" --no-frozen-lockfile\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 编译部署命令，根据环境取舍")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 测试环境")]),a._v("\ncorgi push "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("jenkins工作空间projects下的目录名"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 生产环境")]),a._v("\ncorgi push "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("jenkins工作空间projects下的目录名"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" prod\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 例子")]),a._v("\ncorgi push cn_site "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" prod\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 静态页面生成")]),a._v("\ncorgi preview example\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 静态页发送脚本")]),a._v("\n-\n\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);